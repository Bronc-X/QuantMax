# QuantMAx - åˆ†é’Ÿçº§å¤šå¤´è¶…çŸ­é‡åŒ–ç³»ç»Ÿ

[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

> **åœ¨ A è‚¡ä¸»çº¿é¢˜æä¸çƒ­æ¦œè‚¡ç¥¨ä¸­ï¼Œç”¨æ¨¡å‹ç­›é€‰æœ€å¼ºåˆ†é’Ÿçº§ Alpha ä¿¡å·ï¼Œè§„é¿æ¶¨åœä¸æµåŠ¨æ€§é™·é˜±ï¼ŒæŒ‰å›ºå®šèŠ‚å¥åš TopK å¤šå¤´è¶…çŸ­äº¤æ˜“ï¼Œå¹¶é€šè¿‡ä¸¥æ ¼é£æ§ç¡®ä¿èµ„é‡‘å®‰å…¨ã€‚**

---

## ğŸ“¦ æœ¬åœ°éƒ¨ç½²

### ç¯å¢ƒè¦æ±‚
- macOS / Linux
- Python 3.11+
- pip / uv

### ä¸€é”®éƒ¨ç½²

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/YOUR_USERNAME/QuantMAx.git
cd QuantMAx

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3.11 -m venv .venv
source .venv/bin/activate

# 3. å®‰è£…ä¾èµ–
pip install -e .

# 4. ä¸‹è½½åˆ†é’Ÿçº¿æ•°æ®
quantopen download-1m

# 5. è¿è¡Œå›æµ‹éªŒè¯
quantopen backtest
```

### è¿è¡Œæ ¸å¿ƒç­–ç•¥å›æµ‹

```bash
# ä½¿ç”¨åŒ…è£…è„šæœ¬ (è‡ªåŠ¨è®¾ç½® PYTHONPATH)
./run.sh backtest-core \
  --hotlist-csv data/raw/hotlist.csv \
  --themes-csv data/raw/themes.csv

# æˆ–æ‰‹åŠ¨è®¾ç½®
PYTHONPATH=. quantopen backtest-core
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | å‘½ä»¤ | è¯´æ˜ |
|------|------|------|
| **æ•°æ®ä¸‹è½½** | `quantopen download-1m` | AkShare ä¸œæ–¹è´¢å¯Œåˆ†é’Ÿçº¿ |
| **åŸºç¡€å›æµ‹** | `quantopen backtest` | HoldNMinutes ç­–ç•¥ |
| **é£æ§å›æµ‹** | `quantopen backtest-risk` | æ¶¨åœ/æµåŠ¨æ€§/å›æ’¤è¿‡æ»¤ |
| **æ ¸å¿ƒç­–ç•¥** | `quantopen backtest-core` | é—­æºç­–ç•¥æ¥å£ |
| **Qlibå¯¼å‡º** | `quantopen export-qlib` | å¯¼å‡º Qlib æ ¼å¼æ•°æ® |

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    QuantMAx ç³»ç»Ÿæ¶æ„                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®å±‚: AkShare â†’ Parquet ç¼“å­˜ â†’ Backtrader Feed            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç­–ç•¥å±‚: CoreStrategy (å¯æ’æ‹”é—­æºç­–ç•¥æ¥å£)                    â”‚
â”‚    â”œâ”€â”€ alpha_score()        # æ¨¡å‹æ‰“åˆ†                      â”‚
â”‚    â”œâ”€â”€ filter_and_select()  # è¿‡æ»¤è£å†³                      â”‚
â”‚    â””â”€â”€ build_target_weights() # ç»„åˆæ‰§è¡Œ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å›æµ‹å±‚: Backtrader + Aè‚¡ä½£é‡‘æ¨¡å‹ + åˆ†æå™¨                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§  æ ¸å¿ƒç­–ç•¥é€»è¾‘

### ä¸‰å±‚å†³ç­–ç³»ç»Ÿ

#### 1ï¸âƒ£ Alpha æ‰“åˆ†å±‚ (`alpha_score`)

```
FinalScore = BaseScore Ã— HotRankWeight Ã— ThemeBoost
```

| å› å­ | è®¡ç®—æ–¹å¼ | ä½œç”¨ |
|------|----------|------|
| BaseScore | 1åˆ†é’ŸåŠ¨é‡ or æ¨¡å‹åˆ†æ•° | æ•æ‰çŸ­æœŸå¼ºåŠ¿ |
| HotRankWeight | 1/çƒ­æ¦œæ’å | æ³¨æ„åŠ›åŠ æƒ |
| ThemeBoost | ä¸»é¢˜åŠ æƒç³»æ•° | ä¸»çº¿è¶‹åŠ¿å¢å¼º |

#### 2ï¸âƒ£ è¿‡æ»¤ä¸è£å†³å±‚ (`filter_and_select`)

| è¿‡æ»¤è§„åˆ™ | æ¡ä»¶ | ç›®çš„ |
|----------|------|------|
| çƒ­æ¦œè¿‡æ»¤ | rank â‰¤ 50 | ä¿è¯å¸‚åœºæ³¨æ„åŠ› |
| æ¶¨åœè¿‡æ»¤ | æ¶¨å¹… < 9.5% | é¿å…æµåŠ¨æ€§é™·é˜± |
| æµåŠ¨æ€§è¿‡æ»¤ | æˆäº¤é¢ â‰¥ 200ä¸‡ | æ§åˆ¶æ»‘ç‚¹ |
| åˆ†æ•°è¿‡æ»¤ | score > 0 | é¿å…å™ªå£° |

#### 3ï¸âƒ£ ç»„åˆä¸æ‰§è¡Œå±‚ (`build_target_weights`)

| è§„åˆ™ | å‚æ•° | è¯´æ˜ |
|------|------|------|
| TopKé€‰æ‹© | topk=5 | é€‰åˆ†æ•°æœ€é«˜çš„Kåª |
| ç­‰æƒåˆ†é… | max_weight=10% | å•ç¥¨ä¸Šé™ |
| å†å¹³è¡¡ | æ¯5åˆ†é’Ÿ | å›ºå®šèŠ‚å¥ |
| æŒæœ‰æœŸ | 60åˆ†é’Ÿ | è¶…æ—¶å¼ºå¹³ |
| å›æ’¤é£æ§ | DD>8% æ¸…ä»“ | ä¿æŠ¤èµ„é‡‘ |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
QuantMAx/
â”œâ”€â”€ src/quantopen/
â”‚   â”œâ”€â”€ cli.py                  # CLI å…¥å£
â”‚   â”œâ”€â”€ strategy/               # ç­–ç•¥æ¡†æ¶
â”‚   â”‚   â”œâ”€â”€ api.py              # CoreStrategy æ¥å£
â”‚   â”‚   â”œâ”€â”€ rules.py            # è¿‡æ»¤è§„åˆ™
â”‚   â”‚   â””â”€â”€ portfolio.py        # ç»„åˆæ„å»º
â”‚   â”œâ”€â”€ backtest/               # å›æµ‹å¼•æ“
â”‚   â”‚   â”œâ”€â”€ bt_core_strategy.py # æ ¸å¿ƒç­–ç•¥é€‚é…
â”‚   â”‚   â””â”€â”€ costs.py            # Aè‚¡ä½£é‡‘
â”‚   â””â”€â”€ datafeed/               # æ•°æ®ä¸‹è½½
â”œâ”€â”€ quant_core/                 # é—­æºç­–ç•¥ (ä¸æäº¤)
â”œâ”€â”€ configs/                    # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                       # æ•°æ®ç›®å½•
â””â”€â”€ STRATEGY_SPEC.md            # ç­–ç•¥è§„æ ¼æ–‡æ¡£
```

---

## âš™ï¸ é…ç½®å‚æ•°

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `topk` | 5 | æœ€å¤§æŒä»“æ•° |
| `hot_topn` | 50 | çƒ­æ¦œå‰Nå |
| `min_amount_1m` | 200ä¸‡ | 1åˆ†é’Ÿæœ€å°æˆäº¤é¢ |
| `limit_up_threshold` | 9.5% | æ¶¨åœé˜ˆå€¼ |
| `hold_minutes` | 60 | æœ€å¤§æŒæœ‰åˆ†é’Ÿ |
| `max_account_drawdown` | 8% | é£æ§é˜ˆå€¼ |

---

## ğŸ” é—­æºè¾¹ç•Œ

| æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| æ•°æ®ä¸‹è½½ | âœ… å¼€æº | é€šç”¨åŸºç¡€è®¾æ–½ |
| å›æµ‹å¼•æ“ | âœ… å¼€æº | Backtrader å°è£… |
| ç­–ç•¥æ¥å£ | âœ… å¼€æº | CoreStrategy ABC |
| ç­–ç•¥å®ç° | âŒ é—­æº | `quant_core/` |

---

## ğŸ“ˆ æ‰©å±•æ–¹å‘

- [ ] æ¥å…¥ Qlib LGBModel / GRU
- [ ] åˆ†æ—¶æ®µè§„åˆ™ï¼ˆå¼€ç›˜/å°¾ç›˜ï¼‰
- [ ] ä¸»é¢˜æ‹¥æŒ¤åº¦ä¿¡å·
- [ ] å®ç›˜æ¥å£å¯¹æ¥

---

## License

MIT
